# Python 설치와 설정
>[데이터 사이언스 스쿨](https://datascienceschool.net/01%20python/01.00%201%EC%9E%A5%20%ED%8C%8C%EC%9D%B4%EC%8D%AC%20%EC%84%A4%EC%B9%98%EC%99%80%20%EC%84%A4%EC%A0%95.html)에서 공부한 내용을 기록합니다.

파이썬은 다음 두 가지 방법으로 사용할 수 있다.
1. 콘솔이나 주피터 노트북을 사용한 REPL(Read–Eval–Print Loop) 방식
2. 스크립트(script) 실행 방식

## REPL(Read–Eval–Print Loop) 방식

REPL(레플) 방식은 주피터 노트북이나 파이썬(또는 IPython) 콘솔을 실행해서 명령어를 한 줄씩 입력하며 실행 상황을 지켜보는 방식이다.  
파이썬 프로그래밍을 공부하거나 코드의 초기 버전을 제작할 때 유용하다. 이 책에서는 모든 코드를 REPL 방식으로 실행하면서 공부한다.

노트북은 셀(cell)이라는 네모 칸들로 구성된다.

![jpt01](https://github.com/sudaltokki/TIL/blob/main/Machine_Learning/img/jpt.PNG)

코드를 입력한 후에 `shift` + `Enter` 키를 누르면 현재 셀이 실행되며 결과가 출력된다.  
실행된 셀의 프롬프트에는 실행 순서를 나타내는 번호가 붙는다. Enter 키만 누르면 다음 줄로 넘어가기만 하고 코드가 실행되지는 않는다.

### 값과 변수의 표현

위의 코드에서 두 번째 명령으로 나오는 x는 변수 x 값을 표시하라는 뜻이다. 이때 표시되는 것을 그 값의 표현(representation)이라고 한다.  
변수 이름을 입력했을 때 표현이 나오는 것은 REPL에서만 가능하고 이후에 설명할 스크립트 실행시에는 표시되지 않는다. 

이 방식이 REPL이라고 불리우는 것은 이렇게 명령을 하나 하나 입력하고(Read) 실행하면서(Evaluate) 변수의 값을 출력하여(Print) 살펴보는 것을 반복(Loop)하면서 코드를 만들기 때문이다.

변수 이름을 지정해서 변숫값을 살펴보는 것은 셀의 마지막 행(line)에서만 가능하다.  
즉 아래 그림의 8번 셀에서 중간에 있는 x 등은 아무런 의미가 없으므로 8번 셀의 코드는 실제로 9번 셀과 같다.

![jpt02](https://datascienceschool.net/_images/jupyter_notebook_7.png)

노트북 사용이 끝나면 `File` > `Rename` 으로 노트북의 이름을 다른 이름으로 바꾼 뒤, `File` > `Close and Halt` 명령으로 파이썬 탭을 닫는다.  
이 명령을 사용하지 않고 그냥 웹 브라우저를 닫으면 파이썬 콘솔이 배경에서 계속 실행된다.  

> 반드시 Close and Halt 명령을 사용해 닫자.

## 스크립트 실행 방식

코드를 모두 완성한 후 전체 코드를 한 번에 실행하고 싶을 때는 코드를 .py 확장자 파일로 만든다. 이렇게 만든 코드 파일을 스크립트(script)라고 한다. 
스크립트는 주피터 노트북이나 아이파이썬(IPython) 콘솔을 실행하지 않고 터미널에서 직접 실행할 수 있다.

다만 스크립트에서는 변수 이름만 입력해서 변수의 값, 즉 표현(representation)이 표시되게 하는 것은 불가능하고 표시하려면 반드시 print 명령을 사용해야 한다.

`New` > `Text File` 을 실행하여 파일 입력 탭을 생성, `File` > `Rename` 으로 이름을 바꾼다.

![jpt03](https://github.com/sudaltokki/TIL/blob/main/Machine_Learning/img/jpt03.PNG)  

코드를 타이핑하고 `File` > `Save` 명령을 선택해 저장한다.

스크립트 방식은 애플리케이션(application)이나 반복하여 실행해야 하는 코드를 만들 때 주로 사용된다.

이제 아나콘다 프롬프트를 실행해 터미널을 열고 test.py가 저장된 폴더로 이동한 후 다음 명령을 입력한 후 엔터를 치자.   
```
python test.py
```
파이썬 스크립트가 실행되고 결과가 출력되는 것을 볼 수 있다.
>폴더는 cd + 경로 를 입력해 이동한다.

![jpt04](https://github.com/sudaltokki/TIL/blob/main/Machine_Learning/img/jpt04.PNG)


## 라이브러리와 패키지

다른 프로그램 제작에 사용하기 위해 미리 만들어진 프로그램의 집합을 라이브러리(library)라고 한다.  
파이썬에서는 라이브러리라는 용어 대신 패키지(package)라는 말을 주로 사용한다.

### 패키지 설치
일부 패키지는 파이썬을 설치할 때 함께 설치되는데 이러한 패키지를 표준 패키지(standard package)라고 한다. 그러나 대부분의 패키지는 파이썬을 설치한 후에 별도로 설치한다.
아나콘다 배포판을 설치하면 다양한 패키지들을 추가로 기본 설치해준다. 

C, C++, 자바 같은 언어는 새로운 라이브러리를 설치할 때 그 라이브러리를 제공하는 웹사이트를 일일이 방문하여 소스코드나 바이너리를 내려받아야 한다.
반면 파이썬은 모든 패키지를 한 서버에 등록해서 간단한 명령어만으로 패키지를 쉽게 내려받아 설치할 수 있다.

기본적으로 모든 파이썬 패키지는 PyPI 서버(https://pypi.org/) 라는 공식 패키지 서버에 등록된다.  
하지만 아나콘다는 PyPI가 아닌 독자적인 패키지 서버(https://anaconda.org/)를 운영하고 있으며 운영체제별로 미리 컴파일된 패키지를 제공하는 대신 PyPI보다는 제공하는 패키지의 수가 적다.

### 패키지 관리자
패키지를 설치하기 위한 프로그램을 패키지 관리자라고 한다.  
파이썬에서는 pip라고 하는 패키지 관리자를 기본으로 제공하지만, 아나콘다 배포판에서는 conda라고 하는 아나콘다 전용 패키지 관리자도 제공한다.

### pip를 사용하여 설치된 패키지를 확인하기
pip 패키지 관리자를 사용할 때는 `pip list` 명령으로 설치된 패키지 목록을 볼 수 있다.

### conda를 사용하여 설치된 패키지를 확인하기
conda 패키지 관리자를 사용할 때는 `conda list` 명령으로 설치된 패키지 목록을 볼 수 있다.

### pip를 이용하여 패키지를 설치하기
pip 패키지 관리자를 이용하여 패키지를 설치하려면 콘솔 창에서 다음과 같이 입력한다.

```
pip install 패키지이름
```

대부분의 패키지는 내부적으로는 다른 패키지의 기능을 사용한다. 예를 들어 만약 패키지 A가 패키지 B의 기능을 사용하고 있다면 패키지 B가 설치되어 있을 때만 패키지 A를 사용할 수 있다. 
이때 패키지 A가 패키지 B에 의존(depend)한다고 말한다. pip로 패키지를 설치하면 그 패키지가 의존하는 다른 패키지도 자동으로 설치한다.

### conda를 이용하여 패키지를 설치하기
아나콘다 배포판에서 제공하는 conda 패키지 관리자는 의존성 관리 성능이 pip보다 뛰어나다. 설치하거나 제거할 패키지간의 의존성을 파악하고 만약 설치하고자 하는 패키지가 의존하고 있는 다른 패키지가 설치되어 있지 않거나 버전이 맞지 않으면 필요한 패키지를 설치해 주는 것 이외에도 기존의 패키지를 자동으로 업그레이드하거나 다운그레이드해 준다.

conda를 이용하여 패키지를 설치하는 명령어는 다음과 같다.

```
conda install 패키지이름
```

패키지를 설치할 때는 되도록 conda 패키지 관리자를 사용하고 anaconda 서버에 해당 패키지가 없을 때만 pip 패키지 관리자를 사용하기를 권장한다.

## 데이터 분석용 파이썬 패키지 소개
파이썬은 여러 분야에 사용할 수 있는 다양한 패키지를 가지고 있다는 것이 큰 장점이다. 다음은 그 중에서도 데이터 분석에 많이 사용되는 유명한 패키지들이다.

### NumPy
NumPy(넘파이)패키지는 파이썬에서 수치 해석, 특히 선형 대수 계산 기능을 제공한다. 자료형이 고정된 다차원 배열 클래스(n-dimensional array)와 벡터화 연산(vectorized operation)을 지원하며 수학 연산을 위한 가장 기본적이고 중요한 패키지다.

### SciPy
SciPy(사이파이)패키지는 고급 수학 함수, 수치적 미적분, 미분 방정식 계산, 최적화, 신호 처리 등에 사용하는 다양한 과학 기술 계산 기능을 제공한다.

### SymPy
SymPy(심파이)패키지는 숫자를 더하거나 빼는 수치 연산이 아니라 인수 분해, 미분, 적분 등 심볼릭 연산 기능을 제공한다.

### Pandas
Pandas(판다스)패키지는 테이블 형태의 데이터를 다루는 데이터프레임(DataFrame) 자료형을 제공한다. 자료의 탐색이나 정리에 아주 유용하여 데이터 분석에 빠질 수 없는 필수 패키지다.

### Matplotlib
Matplotlib(맷플롯리브)패키지는 파이썬에서 각종 그래프나 차트 등을 그리는 시각화 기능을 제공한다. Tkinter, wxPython, Qt, GTK+ 등의 다양한 그래픽 엔진을 사용할 수 있다. 

### Seaborn
Seaborn(시본)패키지는 Matplotlib 패키지에서 지원하지 않는 고급 통계 차트를 그리는 통계용 시각화 기능을 제공한다.

> 아나콘다 배포판을 설치하면 NumPy, SciPy, SymPy, Matplotlib, Seaborn 등은 자동으로 설치된다. 아나콘다 배포판을 사용하지 않는 경우에는 pip나 conda를 사용하여 직접 설치할 수 있다.

## 아이파이썬 및 주피터 설정
아이파이썬과 주피터 노트북을 사용할 때 사용자의 편의를 위해 사용자 설정(user customization)을 하는 방법

### 프로필 작성
아이파이썬 또는 주피터 관련 설정을 하려면 프로필(profile)이 필요하다. 프로필은 다음 위치에 저장된다.   
`사용자홈디렉터리/.ipython/profile_default/`

만약 이 프로필 디렉터리가 없다면 터미널에서 다음 명령으로 만들 수 있다.
```
ipython profile create
```

### 사용자 설정 파일
사용자 설정은 스타트업 파일과 ipython_config.py 파일을 이용하며 설정 내용은 모든 아이파이썬과 주피터 노트북에 공통으로 적용된다.

* **스타트업 파일**
스타트업 파일은 아이파이썬과 주피터 노트북을 이용한 콘솔이 시작되기 전에 실행되는 파일이다. 스타트업 파일은 따로 정해진 이름이 있는 것이 아니라 startup 폴더 아래의 .py 확장자를 가진 모든 파이썬 스크립트가 스타트업 파일이며 파일 이름의 알파벳 순서로 실행된다.

이 책에서는 매번 주피터 노트북을 실행할 때마다 반복해서 패키지 임포트 명령을 치지 않아도 되도록 자주 사용되는 패키지를 미리 임포트한다.

스타트업 파일이 있는 디렉터리는 다음과 같다.
`사용자홈디렉터리/.ipython/profile_default/startup/`

보통 가장 먼저 실행되어야 하는 파일 이름을 00.py, 그 다음으로 실행되는 파일 이름을 01.py과 같이 설정한다.  
이 디렉터리에 00.py이라는 이름으로 파일을 하나 만들고 다음과 같이 내용을 입력하여 저장한다.

```python
# 경고 무시
import warnings
warnings.simplefilter('ignore')

# 자주 사용하는 패키지를 임포트
import matplotlib as mpl
import matplotlib.pylab as plt
from mpl_toolkits.mplot3d import Axes3D
import seaborn as sns
import numpy as np
import scipy as sp
import pandas as pd
import statsmodels.api as sm
import sklearn as sk

# matplotlib 설정
mpl.use('Agg')

# seaborn 설정
sns.set()
sns.set_style("whitegrid")
sns.set_color_codes()
```

이 스타트업 파일이 정상 실행되려면 임포트할 패키지가 미리 설치되어 있어야 한다. 따라서 위 스타업 파일에서 임포트하는 다음 패키지가 설치되어 있는지 conda list 명령으로 확인하고 만약 설치되어 있지 않다면 패키지를 설치한다.

* **ipython_config.py 설정 파일**
일부 파이썬 명령은 하나의 스크립트 안에서만 실행되므로 스타트업 파일에 적어 놓아도 실제 아이파이썬 콘솔에는 적용되지 않는다. 예를 들어 mpl.rc 계열의 임포트 명령은 하나의 스크립트 안에서만 영향을 미친다. 이때는 ipython_config.py 설정 파일 안에서 c.InteractiveShellApp.exec_lines 설정 항목을 다음처럼 지정하면 된다. 이 항목은 파이썬이 시작한 직후 스스로 실행할 명령어로 이루어진 문자열 목록이다.

다음은 ipython_config.py 설정 파일의 예다.

```python
c = get_config()

c.InteractiveShellApp.exec_lines = [
    "mpl.rc('font', family='NanumGothic')",  # 나눔고딕 폰트 사용
    "mpl.rc('axes', unicode_minus=False)", # 유니코드 음수 기호 사용
    "mpl.rc('figure', figsize=(8, 5))",  # 그림 크기 (단위: 인치)
    "mpl.rc('figure', dpi=300)",  # 그림 해상도
]
```

맷플롯리브(Matplotlib) 패키지로 그림을 그릴 때 나눔고딕 폰트를 사용하므로 그에 맞도록 설정했다.  
이 파일이 정상 실행되려면 나눔고딕 폰트가 미리 설치되어 있어야 한다. 나눔고딕 폰트는 다음 웹페이지에서 내려받을 수 있다.

[나눔고딕 폰트 설치](https://hangeul.naver.com/font)

이제부터 나오는 모든 파이썬 예제 코드는 스타트업 파일과 ipython_config.py 설정 파일이 앞에서 작성한 대로 설정되어 있다는 가정하에 작성한다.
